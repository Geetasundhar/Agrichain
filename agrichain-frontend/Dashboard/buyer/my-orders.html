<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title data-i18n="title">My Orders - AgriChain</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
/* Global */
*{margin:0;padding:0;box-sizing:border-box;font-family:Poppins, sans-serif;}
body{background:#eef8ec;color:#333;}

/* Header */
header{
  background:#1b5e20;
  padding:12px 25px;
  display:flex;justify-content:space-between;align-items:center;
  flex-wrap:wrap;color:white;
}
header img{height:65px;border-radius:8px;cursor:pointer;}
nav{display:flex;gap:18px;flex-wrap:wrap;}
nav a{text-decoration:none;color:#fff;font-weight:600;}
nav a:hover{color:#ffeb3b;}

.lang-btn{
 background:#fff;color:#1b5e20;font-weight:600;
 padding:7px 14px;border-radius:6px;border:none;
 cursor:pointer;margin-left:5px;
}
.lang-btn:hover{background:#ffeb3b;color:#1b5e20;}

/* Hero */
.hero{
 text-align:center;padding:35px;
 background:#c8efc4;border-radius:10px;margin:20px;
}
.hero h2{color:#1b5e20;font-size:2rem}

/* Filter Buttons */
.order-filter{text-align:center;margin-top:5px;}
.order-filter button{
 padding:10px 18px;border:none;border-radius:8px;
 background:#2e7d32;color:white;font-weight:600;
 margin:5px;cursor:pointer;box-shadow:0 2px 5px rgba(0,0,0,.2);
}
.order-filter button:hover{background:#1b5e20;transform:scale(1.05);}

/* Orders */
.orders-container{
 display:grid;grid-template-columns:repeat(auto-fit,minmax(270px,1fr));
 gap:25px;max-width:1200px;margin:30px auto;padding:0 20px;
}
.order-card{
 background:#fff;padding:18px;border-radius:12px;
 box-shadow:0 5px 10px rgba(0,0,0,0.15);
 transition:.3s;
}
.order-card:hover{transform:translateY(-5px);}

.order-card img{
 width:100%;height:160px;object-fit:cover;border-radius:10px;
}
.order-status{
 padding:6px 10px;border-radius:6px;color:white;font-weight:700;
 display:inline-block;margin-top:6px;
}
.status-pending{background:#f39c12;}
.status-completed{background:#2ecc71;}
.status-cancelled{background:#e74c3c;}

.track-btn{
 width:100%;padding:10px;background:#2ecc71;color:white;
 font-weight:700;border:none;border-radius:6px;margin-top:10px;
 cursor:pointer;
}
.track-btn:hover{background:#1e8449}

/* Footer */
footer{
  background:#0d3b1d;
  color:white;
  padding:45px 20px;
  margin-top:50px;
}
.footer-container{
  max-width:1200px;
  margin:auto;
  display:flex;
  flex-wrap:wrap;
  justify-content:space-between;
  gap:35px;
}
.footer-box h3{
  margin-bottom:12px;
  font-size:18px;
  color:#a5f3a7;
}
.footer-box a{
  color:#e8ffe1;
  text-decoration:none;
  display:block;
  font-size:14px;
  margin:6px 0;
  transition:.3s;
}
.footer-box a:hover{
  color:#ffeb3b;
  padding-left:5px;
}
.footer-box p{
  font-size:14px;
  margin:4px 0;
}
.footer-bottom{
  text-align:center;
  margin-top:25px;
  padding-top:15px;
  border-top:1px solid rgba(255,255,255,.3);
  font-size:14px;
}
</style>
</head>

<body>

<header>
 <img src="../../images/logo.png" onclick="window.location.href='../../index.html'">
  <nav>
    <a href="../../index.html" data-i18n="nav.home">Home</a>
    <a href="../../All/about.html" data-i18n="nav.about">About</a>
    <a href="../../instruction/farmerinstruction.html" data-i18n="nav.farmer">Farmer</a>
    <a href="../../Dashboard/buyer/buyer_dashboard.html" data-i18n="nav.buyer">Buyer</a>
    <a href="../../instruction/trnsportinstruction.html" data-i18n="nav.transporter">Transporter</a>
    <a href="../../instruction/admininstruction.html" data-i18n="nav.admin">Admin</a>
    <a href="../../instruction/insuranceinstruction.html" data-i18n="nav.insurance">Insurance</a>
  </nav>

 <div>
   <button class="lang-btn" onclick="changeLang('en')">English</button>
   <button class="lang-btn" onclick="changeLang('ta')">தமிழ்</button>
 </div>
</header>

<section class="hero">
 <h2 data-i18n="hero.title">My Orders</h2>
 <p data-i18n="hero.subtitle">Track your product orders</p>
</section>

<div class="order-filter">
 <button onclick="filterOrders('all')" data-i18n="filter.all">All</button>
 <button onclick="filterOrders('pending')" data-i18n="filter.current">Current</button>
 <button onclick="filterOrders('completed')" data-i18n="filter.completed">Completed</button>
 <button onclick="filterOrders('cancelled')" data-i18n="filter.cancelled">Cancelled</button>
</div>

<section id="ordersList" class="orders-container"></section>

<footer>
  <div class="footer-container">
    
    <div class="footer-box">
      <h3 data-i18n="brand">AgriChain</h3>
       <p><i class="fa-solid fa-location-dot"></i> Chennai, Tamil Nadu</p>
      <p><i class="fa-solid fa-envelope"></i> support@agrichain.com</p>
      <p><i class="fa-solid fa-phone"></i> +91 95419 54142</p>
    </div>

    <div class="footer-box">
      <h3 data-i18n="footer.links">Quick Links</h3>
      <a href="../../index.html" data-i18n="nav.home">Home</a>
      <a href="../../All/about.html" data-i18n="nav.about">About</a>
      <a href="../../All/contact.html" data-i18n="nav.contact">Contact</a>
    </div>

    <div class="footer-box">
      <h3 data-i18n="footer.support">Support</h3>
      <a href="#" data-i18n="footer.faq">FAQ</a>
      <a href="#" data-i18n="footer.terms">Terms & Conditions</a>
      <a href="#" data-i18n="footer.privacy">Privacy Policy</a>
    </div>
    
    <div class="footer-box">
      <h3 data-i18n="footer.social">Follow Us</h3>
      <a href="#"><i class="fab fa-facebook"></i> Facebook</a>
      <a href="https://wa.me/+919541954142" target="_blank"><i class="fab fa-whatsapp"></i> WhatsApp</a>
        <a href="#"><i class="fab fa-youtube"></i> YouTube</a>
    </div>
  </div>

  <div class="footer-bottom" data-i18n="footer.bottom">
    © 2025 AgriChain — All Rights Reserved.
  </div>
</footer>

<script src="https://unpkg.com/i18next@23.7.6/dist/umd/i18next.min.js"></script>

<script>
const resources = {
 en: { translation: {
   title:"My Orders - AgriChain",
   nav:{home:"Home",about:"About",contact:"Contact",farmer:"Farmer",buyer:"Buyer",transporter:"Transporter",admin:"Admin",insurance:"Insurance"},
   hero:{title:"My Orders",subtitle:"Track your product orders"},
   filter:{all:"All",current:"Current",completed:"Completed",cancelled:"Cancelled"},
   brand:"AgriChain",
   footer:{
     text:"Connecting farmers, buyers & logistics for a smart agriculture marketplace.",
     links:"Quick Links",
     support:"Support",
     faq:"FAQ",
     terms:"Terms & Conditions",
     privacy:"Privacy Policy",
     social:"Follow Us",
     bottom:"© 2025 AgriChain — All Rights Reserved."
   }
 }},
 ta: { translation: {
   title:"என் ஆர்டர்கள் - அக்ரிச்செயின்",
   nav:{home:"முகப்பு",about:"பற்றி",contact:"தொடர்பு",farmer:"விவசாயி",buyer:"வாங்குபவர்",transporter:"போக்குவரத்து",admin:"நிர்வாகி",insurance:"காப்பீடு"},
   hero:{title:"என் ஆர்டர்கள்",subtitle:"உங்கள் ஆர்டர்களை கண்காணிக்கவும்"},
   filter:{all:"அனைத்தும்",current:"நடப்பு",completed:"நிறைவு",cancelled:"ரத்து"},
   brand:"அக்ரிச்செயின்",
   footer:{
     text:"விவசாயிகள், வாங்குபவர்கள் மற்றும் போக்குவரத்தை இணைக்கும் நவீன வேளாண் தளம்.",
     links:"விரைவு இணைப்புகள்",
     support:"ஆதரவு",
     faq:"அடிக்கடி கேட்கப்படும் கேள்விகள்",
     terms:"விதிமுறைகள் & நிபந்தனைகள்",
     privacy:"தனியுரிமைக் கொள்கை",
     social:"எங்களை பின்தொடருங்கள்",
     bottom:"© 2025 அக்ரிச்செயின் — அனைத்து உரிமைகளும் பாதுகாக்கப்பட்டவை."
   }
 }}};

i18next.init({lng:"en",resources}, updateTexts);
function updateTexts(){
 document.querySelectorAll("[data-i18n]").forEach(el=>{
   el.innerHTML=i18next.t(el.dataset.i18n);
 });
}
function changeLang(l){i18next.changeLanguage(l,updateTexts);}

/* Orders */
let allOrders = [];

async function loadOrders() {
 try{
  const r = await fetch("http://localhost:3000/api/orders");
  allOrders = await r.json();
  display(allOrders);
 }catch{
  document.getElementById("ordersList").innerHTML = "<p>No orders found</p>";
 }
}

function filterOrders(s){
 display(s==="all"? allOrders : allOrders.filter(o=>o.status.toLowerCase()===s));
}

function display(data){
 const d=document.getElementById("ordersList");
 d.innerHTML=data.length?"":"<p>No orders found</p>";
 data.forEach(o=>{
  d.innerHTML+=`
   <div class="order-card">
     <img src="${o.cropImage}">
     <h3>${o.cropName}</h3>
     <p>Qty: ${o.quantity}</p>
     <p>₹${o.price}</p>
     <p>${o.farmerName}</p>
     <span class="order-status status-${o.status}">${o.status}</span>
     <button class="track-btn" onclick="location.href='buyer-track-order.html?id=${o._id}'">Track Order</button>
   </div>`;
 });
}
loadOrders();
</script>

</body>
</html>
