<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AgriChain - Crop Insurance Application</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
* {margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif;}

body {
  background:url('../../images/insurance1.jpg') no-repeat center center/cover;
  min-height:90vh;
  min-width: 90vw;
  display:flex;
  flex-direction:column;
  color:#333;
}

@keyframes fadeIn {
  from {opacity:0;}
  to {opacity:1;}
}

/* HEADER */
header {
  position: fixed;
  top: 0; left: 0;
  width: 100%;
  background: rgba(4, 59, 4, 0.95);
  color: white;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 15px 25px;
  border-radius: 0 0 12px 12px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.3);
  z-index: 1000;
  flex-wrap: wrap;
}
header img {
  height: 65px;
  border-radius: 10px;
  cursor: pointer;
  transition: transform 0.3s;
}
header img:hover { transform: scale(1.1); }

/* NAVBAR */
nav { display:flex; gap:20px; flex-wrap:wrap; justify-content:center; }
nav a { text-decoration:none; color:#f3f7f4; font-weight:600; transition:0.3s; font-size:1.05em; }
nav a:hover { color:#ffeaa7; transform:scale(1.1);}
.language-toggle {
  display: flex;
  gap: 8px;
}
.language-toggle button {
  background: #1d7a3c;
  border: none;
  color: white;
  padding: 6px 12px;
  border-radius: 6px;
  cursor: pointer;
  transition: 0.3s;
}
.language-toggle button:hover {
  background: #14642d;
}


/* FORM */
.form-container {
  background:rgba(255,255,255,0.93);
  width:90%;
  max-width:600px;
  margin:80px auto;
  padding:35px 25px;
  border-radius:15px;
  box-shadow:0 10px 25px rgba(0,0,0,0.25);
  transition:0.4s;
}
.form-container:hover {
  transform:translateY(-5px);
  box-shadow:0 15px 35px rgba(0,0,0,0.35);
}
.form-container h2 {
  text-align:center;
  margin-bottom:20px;
  color:#1b5e20;
}
label {font-weight:600;display:block;margin:10px 0 5px;}
input,select,textarea {
  width:100%;
  padding:10px;
  border:1px solid #ccc;
  border-radius:8px;
  transition:0.3s;
  resize:none;
}
input:focus,select:focus,textarea:focus {
  border-color:#1b5e20;
  box-shadow:0 0 6px rgba(27,94,32,0.3);
  outline:none;
}
button {
  width:100%;
  padding:12px;
  border:none;
  background:#1b5e20;
  color:white;
  font-size:1.1em;
  border-radius:8px;
  cursor:pointer;
  transition:background 0.3s,transform 0.3s;
}
button:hover {background:#0f4d23;transform:scale(1.05);}

/* Insurance Info Box */
#scheme-info {
  background:#e8f5e9;
  border-left:5px solid #1b5e20;
  padding:12px;
  margin-top:10px;
  border-radius:8px;
  display:none;
  animation:fadeIn 0.5s ease;
}

/* FOOTER */
footer {
  background: #19692c;
  color: white;
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  align-items: flex-start;
  padding: 30px 20px;
  text-align: center;
}
.footer-section {
  flex: 1;
  min-width: 200px;
  margin: 10px;
}
.footer-section h4 {
  color: #ffeaa7;
  margin-bottom: 8px;
}
.footer-section a, .footer-section p {
  color: white;
  text-decoration: none;
  font-size: 0.9rem;
  margin-bottom: 6px;
  display: block;
}
.footer-section a:hover {
  color: #ffeaa7;
}
.footer-bottom {
  width: 100%;
  border-top: 1px solid rgba(255,255,255,0.3);
  margin-top: 10px;
  padding-top: 8px;
  font-size: 0.85rem;
}
/* Responsive */
@media(max-width:768px){
  nav {text-align:center;margin-top:10px;}
  nav a {display:inline-block;margin:8px;}
  .form-container {width:95%;padding:25px;}
  header {flex-direction:column;}
}
</style>
</head>
<body>

<header>
  <img src="../../images/logo.png" alt="AgriChain Logo">
  <nav>
    <a href="../../index.html" class="active" data-i18n="nav-home">Home</a>
    <a href="../../All/about.html" data-i18n="nav-about">About</a>
    <a href="../../Dashboard/farmer/farmer-dashboard.html" data-i18n="nav-farmer">Farmer</a>
    <a href="instruction/buyerinstruction.html" data-i18n="nav-buyer">Buyer</a>
    <a href="instruction/admininstruction.html" data-i18n="nav-admin">Admin</a>
    <a href="instruction/trnsportinstruction.html" data-i18n="nav-transporter">Transporter</a>
    <a href="instruction/insuranceinstruction.html" data-i18n="nav-insurance">Insurance</a>
  </nav>
  <div class="language-toggle">
    <button onclick="changeLng('en')">English</button>
    <button onclick="changeLng('ta')">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</button>
  </div>
</header>

<div class="form-container">
  <h2 data-i18n="insurance-title"><i class="fas fa-file-shield"></i> Crop Insurance Application</h2>
  <form id="insurance-form">
    <label data-i18n="label-name">Farmer Name</label>
    <input type="text" id="name" required>

    <label data-i18n="label-crop">Crop Name</label>
    <select id="crop" required>
      <option value="">Select Crop</option>
      <option value="Paddy">Paddy</option>
      <option value="Wheat">Wheat</option>
      <option value="Cotton">Cotton</option>
      <option value="Sugarcane">Sugarcane</option>
      <option value="Groundnut">Groundnut</option>
    </select>

    <div id="scheme-info"></div>

    <label data-i18n="label-area">Cultivated Area (acres)</label>
    <input type="number" id="area" required>

    <label data-i18n="label-location">Location / Village</label>
    <input type="text" id="location" required>

    <label data-i18n="label-loss">Expected Loss (‚Çπ)</label>
    <input type="number" id="loss" required>

    <label data-i18n="label-proof">Upload Proof (Image / Document)</label>
    <input type="file" id="proof" accept="image/*,.pdf" required>

    <label data-i18n="label-description">Description</label>
    <textarea id="description" rows="3" placeholder="Describe damage..." required></textarea>

    <button type="submit" data-i18n="submit-insurance">Submit Application</button>
  </form>
</div>

<!-- FOOTER -->
<footer>
  <div class="footer-section">
    <h4 data-i18n="footer-contact">Contact Us</h4>
    <p>üìû +91 9514954142</p>
    <p>üìß info@agrichain.com</p>
    <p>üìç Chennai, Tamil Nadu</p>
  </div>
  <div class="footer-section">
    <h4 data-i18n="footer-links">Quick Links</h4>
    <a href="../../index.html" data-i18n="nav-home">Home</a>
    <a href="../../All/about.html" data-i18n="nav-about">About</a>
    <a href="../../All/contact.html" data-i18n="nav-contact">Contact</a>
  </div>
  <div class="footer-section">
    <h4 data-i18n="footer-social">Follow Us</h4>
    <a href="#"><i class="fab fa-facebook"></i> Facebook</a>
    <a href="#"><i class="fab fa-twitter"></i> Twitter</a>
    <a href="#"><i class="fab fa-instagram"></i> Instagram</a>
    <a href="https://wa.me/+919514954142"><i class="fab fa-whatsapp"></i> WhatsApp</a>
  </div>
  <div class="footer-bottom" data-i18n="footer-bottom-text">
    ¬© 2025 AgriChain. All Rights Reserved.
  </div>
</footer>
<!-- Language Script -->
<script src="https://unpkg.com/i18next@23.7.6/dist/umd/i18next.min.js"></script>
<script src="https://unpkg.com/i18next-browser-languagedetector@7.1.0/i18nextBrowserLanguageDetector.min.js"></script>
<script src="https://unpkg.com/jquery@3.7.1/dist/jquery.min.js"></script>
<script src="https://unpkg.com/jquery-i18next@1.2.1/dist/umd/jquery-i18next.min.js"></script>

<script>
// i18n Language Support
i18next.init({
  lng: 'en',
  resources: {
    en: { translation: {
      "nav-home":"Home","nav-about":"About","nav-farmer":"Farmer","nav-buyer":"Buyer","nav-admin":"Admin",
      "nav-transporter":"Transporter","insurance-title":"Crop Insurance Application",
      "label-name":"Farmer Name","label-crop":"Crop Name","label-area":"Cultivated Area (acres)",
      "label-location":"Location / Village","label-loss":"Expected Loss (‚Çπ)","label-proof":"Upload Proof",
      "label-description":"Description","submit-insurance":"Submit Application",
      "footer-brand-title":"AgriChain","footer-text":"Empowering farmers and ensuring transparency with blockchain-based solutions.",
      "footer-home":"Home","footer-about":"About","footer-contact":"Contact","footer-bottom-text":"¬© 2025 AgriChain. All Rights Reserved."
    }},
    ta: { translation: {
      "nav-home":"‡ÆÆ‡ØÅ‡Æï‡Æ™‡Øç‡Æ™‡ØÅ","nav-about":"‡Æ™‡Æ±‡Øç‡Æ±‡Æø","nav-farmer":"‡Æµ‡Æø‡Æµ‡Æö‡Ææ‡ÆØ‡Æø","nav-buyer":"‡Æµ‡Ææ‡Æô‡Øç‡Æï‡ØÅ‡Æ™‡Æµ‡Æ∞‡Øç","nav-admin":"‡Æ®‡Æø‡Æ∞‡Øç‡Æµ‡Ææ‡Æï‡Æø",
      "nav-transporter":"‡Æ™‡Øã‡Æï‡Øç‡Æï‡ØÅ‡Æµ‡Æ∞‡Æ§‡Øç‡Æ§‡ØÅ","insurance-title":"‡Æ™‡ÆØ‡Æø‡Æ∞‡Øç ‡Æï‡Ææ‡Æ™‡Øç‡Æ™‡ØÄ‡Æü‡Øç‡Æü‡ØÅ ‡Æµ‡Æø‡Æ£‡Øç‡Æ£‡Æ™‡Øç‡Æ™‡ÆÆ‡Øç",
      "label-name":"‡Æµ‡Æø‡Æµ‡Æö‡Ææ‡ÆØ‡Æø ‡Æ™‡ØÜ‡ÆØ‡Æ∞‡Øç","label-crop":"‡Æ™‡ÆØ‡Æø‡Æ∞‡Øç ‡Æ™‡ØÜ‡ÆØ‡Æ∞‡Øç","label-area":"‡Æö‡Ææ‡Æï‡ØÅ‡Æ™‡Æü‡Æø ‡Æ™‡Æ∞‡Æ™‡Øç‡Æ™‡ØÅ (‡Æè‡Æï‡Øç‡Æï‡Æ∞‡Øç)",
      "label-location":"‡Æá‡Æü‡ÆÆ‡Øç / ‡Æï‡Æø‡Æ∞‡Ææ‡ÆÆ‡ÆÆ‡Øç","label-loss":"‡Æé‡Æ§‡Æø‡Æ∞‡Øç‡Æ™‡Ææ‡Æ∞‡Øç‡Æï‡Øç‡Æï‡Æ™‡Øç‡Æ™‡Æü‡ØÅ‡ÆÆ‡Øç ‡Æá‡Æ¥‡Æ™‡Øç‡Æ™‡ØÅ (‚Çπ)","label-proof":"‡Æö‡Ææ‡Æ©‡Øç‡Æ±‡ØÅ ‡Æ™‡Æ§‡Æø‡Æµ‡Øá‡Æ±‡Øç‡Æ±‡Æµ‡ØÅ‡ÆÆ‡Øç",
      "label-description":"‡Æµ‡Æø‡Æµ‡Æ∞‡Æ£‡ÆÆ‡Øç","submit-insurance":"‡Æµ‡Æø‡Æ£‡Øç‡Æ£‡Æ™‡Øç‡Æ™‡Æø‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç",
      "footer-brand-title":"‡ÆÖ‡Æï‡Øç‡Æ∞‡Æø‡Æö‡Øç‡Æö‡ØÜ‡ÆØ‡Æø‡Æ©‡Øç","footer-text":"‡ÆÖ‡Æï‡Øç‡Æ∞‡Æø‡Æö‡Øç‡Æö‡ØÜ‡ÆØ‡Æø‡Æ©‡Øç ‚Äì ‡Æµ‡Æø‡Æµ‡Æö‡Ææ‡ÆØ‡Æø‡Æï‡Æ≥‡Øà ‡Æö‡Æï‡Øç‡Æ§‡Æø‡Æµ‡Ææ‡ÆØ‡Øç‡Æ®‡Øç‡Æ§‡Æµ‡Æ∞‡Øç ‡ÆÜ‡Æï‡Øç‡Æï‡ØÅ‡ÆÆ‡Øç, ‡Æ§‡ØÜ‡Æ≥‡Æø‡Æµ‡ØÅ‡Æ§‡Øç‡Æ§‡Æ©‡Øç‡ÆÆ‡Øà‡ÆØ‡Øà ‡Æâ‡Æ±‡ØÅ‡Æ§‡Æø ‡Æö‡ØÜ‡ÆØ‡Øç‡Æï‡Æø‡Æ±‡Æ§‡ØÅ.",
      "footer-home":"‡ÆÆ‡ØÅ‡Æï‡Æ™‡Øç‡Æ™‡ØÅ","footer-about":"‡Æ™‡Æ±‡Øç‡Æ±‡Æø","footer-contact":"‡Æ§‡Øä‡Æü‡Æ∞‡Øç‡Æ™‡ØÅ","footer-bottom-text":"¬© 2025 ‡ÆÖ‡Æï‡Øç‡Æ∞‡Æø‡Æö‡Øç‡Æö‡ØÜ‡ÆØ‡Æø‡Æ©‡Øç. ‡ÆÖ‡Æ©‡Øà‡Æ§‡Øç‡Æ§‡ØÅ ‡Æâ‡Æ∞‡Æø‡ÆÆ‡Øà‡Æï‡Æ≥‡ØÅ‡ÆÆ‡Øç ‡Æ™‡Ææ‡Æ§‡ØÅ‡Æï‡Ææ‡Æï‡Øç‡Æï‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü‡Æµ‡Øà."
    }}
  }
}, function() { jqueryI18next.init(i18next, $); $('body').localize(); });
function changeLng(lng){ i18next.changeLanguage(lng, () => $('body').localize()); }

// REST API submission
document.getElementById('insurance-form').addEventListener('submit', async function(e){
  e.preventDefault();
  const jsonData = {
    name: document.getElementById('name').value,
    crop: document.getElementById('crop').value,
    area: document.getElementById('area').value,
    location: document.getElementById('location').value,
    expectedLoss: document.getElementById('loss').value,
    description: document.getElementById('description').value
  };
  try {
    const res = await fetch('http://localhost:3000/api/insurance', {
      method: 'POST',
      headers: {'Content-Type':'application/json'},
      body: JSON.stringify(jsonData)
    });
    if(res.ok){
      alert('‚úÖ Insurance application submitted successfully!');
      this.reset();
    } else {
      alert('‚ùå Submission failed. Try again.');
    }
  } catch {
    alert('‚ö†Ô∏è Unable to connect to server.');
  }
});

// Dynamic Insurance Scheme Info
const cropSelect=document.getElementById('crop');
const schemeInfo=document.getElementById('scheme-info');
cropSelect.addEventListener('change',()=>{
  const crop=cropSelect.value;
  let info='';
  switch(crop){
    case 'Paddy': info='Scheme: PMFBY Paddy Protection | Coverage: Flood, Pest, Drought | Premium: ‚Çπ200/acre'; break;
    case 'Wheat': info='Scheme: Bharat Krishi Bima | Coverage: Frost, Disease, Fire | Premium: ‚Çπ180/acre'; break;
    case 'Cotton': info='Scheme: PMFBY Cotton Safety | Coverage: Pest, Heavy Rain | Premium: ‚Çπ250/acre'; break;
    case 'Sugarcane': info='Scheme: Smart Cane Secure | Coverage: Drought, Flood | Premium: ‚Çπ300/acre'; break;
    case 'Groundnut': info='Scheme: AgriSure | Coverage: Drought, Pest | Premium: ‚Çπ150/acre'; break;
  }
  schemeInfo.innerText=info;
  schemeInfo.style.display=info?'block':'none';
});
</script>

</body>
</html>

