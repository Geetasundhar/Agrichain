<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Add Crop - AgriChain</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial,sans-serif;}
body{line-height:1.6;background:#f9f9f9;color:#333;}
header{display:flex;justify-content:space-between;align-items:center;background:#e6f2e6;padding:15px 30px;border-radius:0 0 10px 10px;flex-wrap:wrap;}
header img{height:50px;}
header h1{margin-left:10px;color:#19692c;font-size:1.8em;}
nav{flex:1;text-align:center;}
nav a{margin:0 12px;text-decoration:none;color:#19692c;font-weight:bold;transition:0.3s;}
nav a:hover,nav a.active{color:#0f4d23;}
.language-toggle{display:flex;gap:10px;}
.language-toggle button{padding:5px 10px;border:none;cursor:pointer;border-radius:5px;background:#19692c;color:white;}
.language-toggle button:hover{background:#0f4d23;}
.hero{background:#dff0d8;text-align:center;padding:60px 20px;border-radius:10px;margin:20px;}
.hero h2{font-size:2.4em;margin-bottom:15px;color:#19692c;}
.hero p{font-size:1.2em;}
.form-section{max-width:600px;margin:30px auto;padding:20px;}
.form-container{background:white;padding:25px 20px;border-radius:10px;box-shadow:0 4px 6px rgba(0,0,0,0.1);}
.form-container label{display:block;margin:12px 0 6px;font-weight:bold;}
.form-container input,.form-container select{width:100%;padding:10px;border:1px solid #ccc;border-radius:6px;margin-bottom:15px;}
.form-container button{padding:12px 25px;border:none;border-radius:8px;background:#19692c;color:white;font-size:1em;cursor:pointer;transition:0.3s;width:100%;}
.form-container button:hover{background:#0f4d23;}
footer{background-color:#19692c;color:white;padding:40px 20px 20px;border-radius:10px 10px 0 0;margin-top:40px;}
footer .footer-container{display:flex;flex-wrap:wrap;max-width:1200px;margin:0 auto;justify-content:space-between;gap:20px;}
.footer-brand,.footer-links,.footer-social{flex:1 1 250px;}
.footer-brand h2{margin-bottom:10px;color:#a8d5a2;}
.footer-links h4,.footer-social h4{margin-bottom:10px;font-size:16px;color:#a8d5a2;}
.footer-links ul{list-style:none;padding-left:0;}
.footer-links li{margin-bottom:8px;}
.footer-links a,.footer-social a{color:white;text-decoration:none;margin-right:15px;transition:0.3s;font-weight:bold;}
.footer-links a:hover,.footer-social a:hover{color:#a8d5a2;}
.footer-social a i{margin-right:5px;}
.footer-bottom{text-align:center;margin-top:20px;border-top:1px solid rgba(255,255,255,0.3);padding-top:10px;}
@media(max-width:768px){
  header{flex-direction:column;align-items:flex-start;}
  header h1{font-size:1.5em;}
  nav{text-align:left;margin-top:10px;}
  nav a{display:block;margin:8px 0;}
  .hero{padding:40px 15px;}
  .hero h2{font-size:2em;}
  .form-container{padding:15px;}
  footer .footer-container{flex-direction:column;text-align:center;}
  .footer-social a{margin:5px;display:inline-block;}
}
@media(max-width:480px){
  header{padding:10px;}
  header img{height:40px;}
  .hero h2{font-size:1.6em;}
  .form-container button{font-size:0.9em;padding:10px;}
}
header img {
    height: 80px;              
    width: auto;               
    border-radius: 15px;       
    box-shadow: 0 6px 12px rgba(0,0,0,0.3); 
    transition: transform 0.4s ease, box-shadow 0.4s ease;
    cursor: pointer;
}

header img:hover {
    transform: scale(1.2) rotate(-5deg); 
    box-shadow: 0 10px 20px rgba(0,0,0,0.5); 
}
header .logo-container {
    display: flex;
    align-items: center;
    gap: 15px;                 
}
header h1 {
    font-size: 2em;
    color: #19692c;
    font-weight: bold;
    white-space: nowrap;      
    transition: color 0.3s ease;
}

header h1:hover {
    color: #0f4d23;            
}

@media(max-width:768px){
    header img {
        height: 60px;          
    }
    header h1 {
        font-size: 1.5em;
    }
}

</style>
</head>
<body>

<header>
  <div style="display:flex;align-items:center;">
    <img src="../../images/logo.png" alt="AgriChain Logo">
  </div>
  <nav>
    <a href="../../index.html" data-i18n="nav.home">Home</a>
    <a href="../../All/about.html" data-i18n="nav.about">About</a>
    <a href="../farmer/farmer-dashboard.html" data-i18n="nav.farmer">Farmer</a>
    <a href="#" data-i18n="nav.buyer">Buyer</a>
    <a href="#" data-i18n="nav.admin">Admin</a>
    <a href="#" data-i18n="nav.transporter">Transporter</a>
    <a href="#" data-i18n="nav.insurance">Insurance</a>
  </nav>
  <div class="language-toggle">
    <button onclick="changeLang('en')">English</button>
    <button onclick="changeLang('ta')">தமிழ்</button>
  </div>
</header>

<section class="hero">
  <h2 data-i18n="addCrop.title">Add New Crop</h2>
  <p data-i18n="addCrop.desc">Fill in the details below to add your crop to the marketplace.</p>
</section>

<section class="form-section">
  <div class="form-container">
    <form id="add-crop-form" enctype="multipart/form-data">
      <label for="crop-name" data-i18n="form.cropName">Crop Name</label>
      <input type="text" id="crop-name" name="name" placeholder="Enter crop name" required>

      <label for="crop-type" data-i18n="form.cropType">Crop Type</label>
      <select id="crop-type" name="type" required>
        <option value="" data-i18n="form.selectType">-- Select Crop Type --</option>
        <option value="cereal" data-i18n="form.cereal">Cereal</option>
        <option value="vegetable" data-i18n="form.vegetable">Vegetable</option>
        <option value="fruit" data-i18n="form.fruit">Fruit</option>
        <option value="pulses" data-i18n="form.pulses">Pulses</option>
      </select>

      <label for="quantity" data-i18n="form.quantity">Quantity (kg)</label>
      <input type="number" id="quantity" name="quantity" placeholder="Enter quantity in kg" required>

      <label for="price" data-i18n="form.price">Price per kg (₹)</label>
      <input type="number" id="price" name="price" placeholder="Enter price per kg" required>

      <label for="location" data-i18n="form.location">Location</label>
      <input type="text" id="location" name="location" placeholder="Enter location" required>

      <label for="crop-image" data-i18n="form.cropImage">Upload Image</label>
      <input type="file" id="crop-image" name="image" accept="image/*" required>

      <button type="submit" data-i18n="form.submit">Add Crop</button>
    </form>
    <div id="qrCode" style="margin-top:20px; text-align:center;"></div>
  </div>
</section>

<footer>
  <div class="footer-container">
    <div class="footer-brand">
      <h2 data-i18n="footer.brand">AgriChain</h2>
      <p data-i18n="footer.text">Empowering farmers, ensuring transparency, and connecting directly with buyers through blockchain technology.</p>
    </div>
    <div class="footer-links">
      <h4 data-i18n="footer.linksTitle">Quick Links</h4>
      <ul>
        <li><a href="../../index.html" data-i18n="footer.home">Home</a></li>
        <li><a href="../../All/about.html" data-i18n="footer.about">About</a></li>
        <li><a href="../../All/contact.html" data-i18n="footer.contact">Contact</a></li>
      </ul>
    </div>
    <div class="footer-social">
      <h4 data-i18n="footer.socialTitle">Follow Us</h4>
      <a href="https://facebook.com/YourPage" target="_blank"><i class="fab fa-facebook-f"></i> Facebook</a> |
      <a href="https://wa.me/+919514954142" target="_blank"><i class="fab fa-whatsapp"></i> WhatsApp</a> |
      <a href="https://twitter.com/YourProfile" target="_blank"><i class="fab fa-twitter"></i> Twitter</a>
    </div>
  </div>
  <div class="footer-bottom">
    <p data-i18n="footer.bottom">© 2025 AgriChain. All Rights Reserved.</p>
  </div>
</footer>

<script src="https://unpkg.com/i18next@23.7.6/dist/umd/i18next.min.js"></script>
<script src="https://unpkg.com/i18next-browser-languagedetector@7.2.0/dist/umd/i18nextBrowserLanguageDetector.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

<script>
i18next.use(i18nextBrowserLanguageDetector).init({
  debug:true,
  fallbackLng:'en',
  resources:{
    en:{translation:{
      nav:{brand:"AgriChain",home:"Home",about:"About",farmer:"Farmer",buyer:"Buyer",admin:"Admin",transporter:"Transporter",insurance:"Insurance"},
      addCrop:{title:"Add New Crop",desc:"Fill in the details below to add your crop to the marketplace."},
      form:{cropName:"Crop Name",cropType:"Crop Type",selectType:"-- Select Crop Type --",cereal:"Cereal",vegetable:"Vegetable",fruit:"Fruit",pulses:"Pulses",quantity:"Quantity (kg)",price:"Price per kg (₹)",location:"Location",cropImage:"Upload Image",submit:"Add Crop",fillAllFields:"Please fill all fields and select an image",networkError:"Network error. Please try again"},
      footer:{brand:"AgriChain",text:"Empowering farmers, ensuring transparency, and connecting directly with buyers through blockchain technology.",bottom:"© 2025 AgriChain. All Rights Reserved.",linksTitle:"Quick Links",socialTitle:"Follow Us",home:"Home",about:"About",contact:"Contact"}
    }},
    ta:{translation:{
      nav:{brand:"அக்ரிச்செயின்",home:"முகப்பு",about:"பற்றி",farmer:"விவசாயி",buyer:"வாங்குபவர்",admin:"நிர்வாகி",transporter:"போக்குவரத்து",insurance:"காப்பீடு"},
      addCrop:{title:"புதிய பயிர் சேர்க்கவும்",desc:"உங்கள் பயிரை சந்தையில் சேர்க்க கீழே உள்ள விவரங்களை நிரப்பவும்."},
      form:{cropName:"பயிர் பெயர்",cropType:"பயிர் வகை",selectType:"-- பயிர் வகையை தேர்வு செய்யவும் --",cereal:"தானியம்",vegetable:"காய்கறி",fruit:"பழம்",pulses:"பருப்பு வகைகள்",quantity:"அளவு (கிலோ)",price:"கிலோவுக்கு விலை (₹)",location:"இடம்",cropImage:"படத்தை பதிவேற்றவும்",submit:"பயிர் சேர்க்கவும்",fillAllFields:"அனைத்து விவரங்களையும் மற்றும் படத்தை தேர்வு செய்யவும்",networkError:"பிணைய பிழை. மீண்டும் முயற்சிக்கவும்"},
      footer:{brand:"அக்ரிச்செயின்",text:"விவசாயிகளை சக்திவாய்ந்தவர் ஆக்கும், தெளிவுத்தன்மையை உறுதி செய்கிறது, மற்றும் நேரடியாக வாடிக்கையாளர்களுடன் இணைக்கிறது.",bottom:"© 2025 அக்ரிச்செயின். எல்லா உரிமைகளும் பாதுகாக்கப்பட்டவை.",linksTitle:"விரைவான இணைப்புகள்",socialTitle:"எங்களை பின்தொடரவும்",home:"முகப்பு",about:"பற்றி",contact:"தொடர்பு"}
    }}
  }
},function(){updateContent();});

function updateContent(){
  document.querySelectorAll('[data-i18n]').forEach(el=>{
    const key = el.getAttribute('data-i18n');
    if(el.tagName==='SELECT'){
      Array.from(el.options).forEach(opt=>{
        const optKey = opt.getAttribute('data-i18n');
        if(optKey) opt.textContent=i18next.t(optKey);
      });
    } else if(el.tagName==='INPUT'){
      if(el.id==='crop-name') el.placeholder=i18next.t('form.cropName');
      if(el.id==='quantity') el.placeholder=i18next.t('form.quantity');
      if(el.id==='price') el.placeholder=i18next.t('form.price');
      if(el.id==='location') el.placeholder=i18next.t('form.location');
    } else el.innerHTML=i18next.t(key);
  });
}

function changeLang(lang){i18next.changeLanguage(lang,()=>updateContent());}

document.getElementById("add-crop-form").addEventListener("submit", async e=>{
  e.preventDefault();
  const form = e.target;
  const formData = new FormData(form);

  formData.append("farmerId", localStorage.getItem("farmerId") || "1");

  try{
    const res = await fetch("http://localhost:5000/farmer/add-crop",{
      method:"POST",
      body:formData
    });
    const data = await res.json();
    if(data.error){
      alert("❌ "+data.error);
    } else {
      alert("✅ Crop added successfully!");
      const qrDiv = document.getElementById("qrCode");
      qrDiv.innerHTML = "";
      new QRCode(qrDiv,{text:data.crop.qrCode,width:150,height:150});
      form.reset();
    }
  } catch(err){
    console.error(err);
    alert(i18next.t("form.networkError"));
  }
});
</script>
</body>
</html>
