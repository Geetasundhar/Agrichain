<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title data-i18n="title">Arrange Transport - AgriChain</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<script src="https://unpkg.com/i18next@22.4.9/i18next.min.js"></script>
<script src="https://unpkg.com/i18next-browser-languagedetector@7.2.1/i18nextBrowserLanguageDetector.min.js"></script>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:"Poppins",sans-serif}
body{
  background:url("../../images/arrange-transport.png") center/cover no-repeat fixed;
  min-height:100vh; 
  display:flex; 
  flex-direction:column;
  backdrop-filter: blur(2px);
}

/* Overlay */
body::before {
  content:"";
  position:fixed;
  top:0; left:0; width:100%; height:100%;
  background:rgba(0,0,0,0.4);
  z-index:-1;
}

/* Prevent Translation */
.no-translate {
  translate: no;
}

header{
  background:rgba(25,105,44,0.95);
  color:#fff;padding:15px 25px;
  display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;
}

header h1{
  font-size:1.8rem;font-weight:600;text-shadow:0 0 5px #000;
}

nav a{
  margin:0 10px;color:#fff;text-decoration:none;font-weight:600;
}
nav a:hover{color:#ffeaa7}

.language-toggle button{
  padding:6px 10px;border:none;border-radius:5px;background:#dfe6e9;color:#19692c;
  font-weight:bold;margin-left:7px;cursor:pointer;
}
.language-toggle button:hover{background:#b2bec3}

/* Card */
.card{
  width:90%;max-width:650px;margin:40px auto;padding:30px;
  background:rgba(255,255,255,0.95);
  border-radius:15px;box-shadow:0 8px 25px rgba(0,0,0,0.2);
}
.card h2{text-align:center;color:#19692c;margin-bottom:10px;font-size:2rem;font-weight:bold}
.card p{text-align:center;color:#555;margin-bottom:20px;font-size:1rem}

label{font-weight:600;color:#333;margin-top:10px;display:block}
input{
  width:100%;padding:10px;border:1.5px solid #aaa;border-radius:8px;margin-bottom:10px;
  background:#fff;font-size:16px
}

.btn-box{display:flex;justify-content:center;gap:15px;margin-top:20px}
button{
  padding:12px 20px;border:none;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;
}
.approve{background:#2ecc71;color:#fff}
.approve:hover{background:#27ae60}
.deny{background:#e74c3c;color:#fff}
.deny:hover{background:#c0392b}

footer{text-align:center;padding:18px;background:#19692c;color:#fff;font-weight:600;margin-top:auto}
</style>
</head>

<body>
<header>
  <div style="display:flex;align-items:center;gap:10px;">
      <!-- ✅ Logo -->
      <img src="../../images/logo.png" style="width:50px;height:50px;border-radius:5px;">
      </div>

  <nav>
        <a href="../../index.html" class="no-translate">Home</a>
        <a href="../../All/about.html" class="no-translate">About</a>
        <a href="../../instruction/farmerinstruction.html" data-i18n="nav.farmer">Farmer</a>
        <a href="../../instruction/buyerinstruction.html" data-i18n="nav.buyer" class="active">Buyer</a>
        <a href="../../instruction/admininstruction.html" data-i18n="nav.admin">Admin</a>
        <a href="../../instruction/insuranceinstruction.html" class="no-translate">Transporter</a>
        <a href="../../instruction/insuranceinstruction.html" class="no-translate">Insurance</a>
  </nav>

  <div class="language-toggle">
     <button onclick="changeLang('en')">English</button>
     <button onclick="changeLang('ta')">தமிழ்</button>
  </div>
</header>

<div class="card">
  <h2 data-i18n="title">Arrange Transport</h2>
  <p data-i18n="subtitle">Review the transport request & respond</p>

  <form id="transportForm">
    <label data-i18n="farmer">Farmer Name</label>
    <input id="farmer" readonly>

    <label data-i18n="buyer">Buyer Name</label>
    <input id="buyer" readonly>

    <label data-i18n="pickup">Pickup Location</label>
    <input id="pickup" readonly>

    <label data-i18n="drop">Drop Location</label>
    <input id="drop" readonly>

    <label data-i18n="crop">Crop Name</label>
    <input id="crop" readonly>

    <label data-i18n="quantity">Quantity (kg)</label>
    <input id="quantity" readonly>

    <label data-i18n="charge">Estimated Delivery Charge (₹)</label>
    <input id="charge" readonly>
  </form>

  <div class="btn-box">
      <button class="approve" onclick="respond('approved')" data-i18n="approve">Approve Transport</button>
      <button class="deny" onclick="respond('denied')" data-i18n="deny">Deny</button>
  </div>
</div>

<footer>© 2025 AgriChain. Empowering Farmers & Buyers.</footer>

<script>
const dict={
  en:{translation:{
    title:"Arrange Transport",subtitle:"Review the transport request & respond",
    farmer:"Farmer Name",buyer:"Buyer Name",pickup:"Pickup Location",drop:"Drop Location",
    crop:"Crop Name",quantity:"Quantity (kg)",charge:"Estimated Delivery Charge (₹)",
    approve:"Approve Transport",deny:"Deny",
    nav:{farmer:"Farmer",buyer:"Buyer",admin:"Admin"}
  }},
  ta:{translation:{
    title:"போக்குவரத்து ஏற்பாடு",subtitle:"கோரிக்கையை பரிசீலித்து பதிலளிக்கவும்",
    farmer:"விவசாயி பெயர்",buyer:"வாங்குபவர் பெயர்",pickup:"எடுத்த இடம்",drop:"விநியோக இடம்",
    crop:"பயிர் பெயர்",quantity:"அளவு (கிலோ)",charge:"மதிப்பிடப்பட்ட கட்டணம் (₹)",
    approve:"ஏற்றுக்கொள்",deny:"நிராகரி",
    nav:{farmer:"விவசாயி",buyer:"வாங்குபவர்",admin:"நிர்வாகி"}
  }}
};

i18next.use(i18nextBrowserLanguageDetector).init({
  resources:dict,fallbackLng:"en"
},updateContent);

function updateContent(){
  document.querySelectorAll("[data-i18n]").forEach(el=>{
    el.innerHTML=i18next.t(el.dataset.i18n);
  });

  // ❗Do NOT translate .no-translate text
  document.querySelectorAll(".no-translate").forEach(el=>{
    el.innerHTML=el.innerHTML;
  });
}

function changeLang(lang){ i18next.changeLanguage(lang,updateContent) }

/* ✅ Fill form values from URL query */
const qp=new URLSearchParams(location.search);
["farmer","buyer","pickup","drop","crop","quantity"].forEach(id=>{
  document.getElementById(id).value = qp.get(id) || "";
});

/* ✅ Calculate charge */
const qty=parseFloat(qp.get("quantity"))||0;
document.getElementById("charge").value=(100+(150*3)+(qty*1)).toFixed(2);

/* ✅ Response */
function respond(status){
  const msg=i18next.language==="ta" 
        ? status==="approved" ? "போக்குவரத்து ஏற்பாடு செய்யப்பட்டது ✅" : "கோரிக்கை நிராகரிக்கப்பட்டது ❌"
        : status==="approved" ? "Transport Arranged ✅" : "Request Denied ❌";

  alert(msg);
  window.location.href="transport-dashboard.html";
}
</script>

</body>
</html>
